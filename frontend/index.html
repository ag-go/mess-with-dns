<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title> mess with dns </title>
    <link rel="stylesheet" type="text/css" href="css/tailwind.min.css" />
    <link rel="stylesheet" type="text/css" href="css/squiggle.css" />
    <script src="js/vue.js"></script>
    <script src="js/formulate.min.js"></script>
    <style>
        a {
            text-decoration: underline;
        }
    </style>
</head>

<body class="text-xl">
    <nav id="nav" class="py-8 squiggle-bottom bg-green-600 text-white" role="navigation">
        <div class="flex">
            <div class="m-auto">
                <h1 class="text-4xl">
                    ★ mess with dns ★
                </h1>
                <div class="text-right mt-2"> a <a class="underline py-2" href="https://wizardzines.com">wizard zines</a> project</div>
            </div>
        </div>
    </nav>
    <div class="flex">
        <div id="app" class="m-auto w-full pt-16 px-8" style="max-width: 1200px">
            <h1 class="font-bold text-3xl text-center">
                DNS records for <span class="font-normal">{{ domain }}.messwithdns.com</span>
            </h1>

            <new-record> </new-record>

            <div v-if="records">
                <table class="w-full">
                    <tr class="bg-gray-100 border border-gray-300">
                        <th class="text-left px-4 py-2">
                            Type
                        </th>
                        <th class="text-left">
                            Content
                        </th>
                        <th class="text-left">
                            TTL
                        </th>
                    </tr>
                    <tbody is="record" v-for="record in records" :key="record.id" :record="record" />
                </table>
            </div>
        </div>
    </div>
</body>

<script id="view-record" type="vue-component">
    <tbody>
        <tr class="border border-gray-200 cursor-pointer" @click="clicked=!clicked">
            <td class="px-4 py-2">
                {{ record.type }}
            </td>
            <td>
                {{ record.A }}
            </td>
            <td>
                {{ record.ttl }}
            </td>
        </tr>
        <tr class="border border-gray-200" v-if="clicked">
            <td colspan="3">
                <formulate-form v-model="record">
                    <div class="flex">
                        <div> {{ record.type }} </div>
                        <formulate-input class="ml-4 "
                            element-class="border border-black rounded-lg mt-2"
                            v-for="item in schemas[record.type]" 
                            :key="item.name" 
                            v-bind="item"></formulate-input>
                        <div class="ml-4 mt-2 flex">
                            <button type="button" class="text-red-600 mt-auto" v-on:click="deleteRecord(record)">
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd">
                            </path>
                        </svg>
                    </button>
                        </div>
                    </div>
                </formulate-form>
            </td>
        </tr>
    </tbody>
</script>

<script id="update-record" type="vue-component">
    <tr class="border border-gray-200">
        <td colspan="3">

        </td>
    </tr>
</script>



<script id="asdf" type="vue-component">

    </div>
    -->
</script>

<script id="new-record" type="vue-component">
    <formulate-form @submit="createRecord">
        <fieldset>
            <div class="flex">
                <formulate-input element-class="border border-black rounded mt-2" name="type" label="Type" v-model="type" type="select" :options="['A', 'AAAA', 'CNAME', 'MX', 'NS', 'PTR', 'SOA', 'SRV', 'TXT']"></formulate-input>

                <formulate-input class="ml-4 " element-class="border border-black rounded-lg mt-2" v-for="item in schemas[type]" :key="item.name" v-bind="item"></formulate-input>
            </div>
        </fieldset>
        <formulate-input type="submit" label="Submit"></formulate-input>
    </formulate-form>
</script>

<script src="script.js"></script>

</html>
